'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.convertCSVToArrayOfArrays = undefined;

var _isNan = require('babel-runtime/core-js/number/is-nan');

var _isNan2 = _interopRequireDefault(_isNan);

var _convertStringToNumber = require('convert-string-to-number');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var convertCSVToArrayOfArrays = exports.convertCSVToArrayOfArrays = function convertCSVToArrayOfArrays(data, _ref) {
  var header = _ref.header,
      separator = _ref.separator;

  var csv = data;
  var array = [];

  var rows = csv.split('\n');

  rows.forEach(function (row, idx) {
    var values = row.split(separator);
    var checkedAndConvertedValues = [];
    if (rows.length - 1 !== idx && (!header && idx !== 0 || header)) {
      values.forEach(function (value) {
        var convertedToNumber = (0, _convertStringToNumber.convertStringToNumber)(value);
        var thisValue = (0, _isNan2.default)(convertedToNumber) ? value : convertedToNumber;

        checkedAndConvertedValues.push(thisValue);
      });

      array.push(checkedAndConvertedValues);
    }
  });

  return array;
};