<!DOCTYPE html>
<html lang="en">

<head>
	<title>Labs - Design Studio</title>

	<meta charset="UTF-8">
	<meta name="description" content="Labs - Design Studio">
	<meta name="keywords" content="lab, onepage, creative, html">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Favicon -->
	<link href="img/favicon.ico" rel="shortcut icon"/>

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Oswald:300,400,500,700|Roboto:300,400,700" rel="stylesheet">

	<!-- Stylesheets -->
	<link rel="stylesheet" href="css/bootstrap.min.css"/>
	<link rel="stylesheet" href="css/font-awesome.min.css"/>
	<link rel="stylesheet" href="css/flaticon.css"/>
	<link rel="stylesheet" href="css/owl.carousel.css"/>
	<link rel="stylesheet" href="css/style.css"/>
	<link rel="stylesheet" type="text/css" href="css/slider.css">



	<!--[if lt IE 9]>
	  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

</head>
<body style="position: absolute; height: 900px; width: 1700px;background-color:#0f020f;">
	<!-- Page Preloder -->
	<div id="preloder">
		<div class="loader">
			<img src="img/logo.png" alt="">
			<h2>Loading.....</h2>
		</div>
	</div>


	<!-- Header section -->
	<header class="header-section">
		<div class="logo">
			<h3>Movie Data Visualization</h3>
			<!-- <img src="img/logo.png" alt=""> -->
			<!-- Logo -->
		</div>
		<!-- Navigation -->
		<div class="responsive"><i class="fa fa-bars"></i></div>
		<nav>
			<ul class="menu-list">
				<li class="active"><a href="index.html">Home</a></li>
				<li><a href="main.html">Main</a></li>
				<li><a href="contact.html">Contact</a></li>
			</ul>
		</nav>
	</header>
	<!-- Header section end -->
	<!-- SVG for the main page-->

	




	<svg width="1800" height = "1000" font-family="sans-serif" font-size="10" style="position: relative" id="Mainsvg" onload = "initialize()"></svg>
	<div class="slider-holder"style="top:900px; left:280px; position:absolute; height: 30px; width: 400px;"></div>
	<div class="bioBox" style="height:500px;width:700px;position:absolute; top:500px;left:1000px; border:0px; color:#ccc;font:16px/26px Georgia, Garamond, Serif;solid-color:white;overflow:auto;" id="Biodiv">
	</div>
	<div style="height:150px;width:150px;position:absolute; top:500px;left:1050px; border:0px;" id="actorPicdiv">
	</div>
	<!-- ---------------------------------------------- -->
	<!-- ------------ the Movies timeline ------------- -->
	<!-- ---------------------------------------------- -->
	<script src="//d3plus.org/js/d3.js"></script>
	<script src="//d3plus.org/js/d3plus.js"></script>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="src/js/d3-scale-radial.js"></script>
	<script src="src/js/scaleRadialGraph.js"></script>
	<script src="src/js/bubbleRadialGraph.js"></script>
	<script src="src/js/streamgraph.js"></script>
	<script src="src/js/stars.js"></script>
	<script src="src/js/pool.js"></script>
	<script src="src/js/movieDensityMap.js"></script>
	<script src="src/js/timeSlider.js"></script>
	<script src= "src/js/forceDirectGraph.js"></script>
	<script src="src/js/biographyWindow.js"></script>


	<!-- ---------------------------------------------- -->
	<!-- the Relationship Network for a selected actor --->
	<!-- ---------------------------------------------- -->


	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script>
		//GLOBAL VARIABLES DEFINITION HERE
		var START_T = 0, 
			END_T = 10, 
			MAX_NUM = 50,
			GENRES = "All";

		// initialize all graphs
		function initialize(){
			console.log("Initialize",MAX_NUM);
				starPrintFunction()
        d3.select('#Mainsvg').append('svg').attr('width', 1000).attr('height', 1000).style("position", "absolute").attr("id","Poolsvg");
        drawPool();
		d3.select('#Mainsvg').append('svg').attr('width', 1000).attr('height', 1000).style("position", "absolute")
            .attr("id","Chartsvg");
        d3.select('#Mainsvg').append('svg').attr('width', 1000).attr('height', 1000).style("position", "absolute")
            .attr("id","Actorsvg");
            let color = d3.scaleOrdinal(d3.schemeCategory20);
     		for(var i=0;i<11;i++){color(i);}
         	//attributes for slider
         	postTimelineData(MAX_NUM);
         	postMovieSelectionData(START_T/10,END_T/10);
			setupSlider(START_T,END_T,updateGraph,color);
            biographyWindow();
			scaleRadialGraph();
			streamGraph();


		}
		function updateGraph(min,max){
			d3.selectAll("#nodeBubbles").remove();
			postMovieSelectionData(min,max);
		}

		// Post request for movies 
		function postMovieSelectionData(min,max){
			let movieData= JSON.stringify({
				start_t:min, 
				end_t:max,
				max_num:100,
				genres:"All"
			});
			axios.post('http://127.0.0.1:5000/getBubbleSizePosition',movieData,{
				headers:{
					'Content-Type':'application/json'}
			}).then(function(response){

					console.log(typeof response.data);
					bubbleRadialGraph(response.data);
					
				})
				.catch(function(error){
					console.log(error);
				});
		}

		//post request for the revenue timeline 
		function postTimelineData(max_num){
			let timelineData = JSON.stringify({
				num_columns:MAX_NUM,
				Mean:1
				});
			axios.post('http://127.0.0.1:5000/getColumnSize', timelineData,{
				headers: {
					'content-Type': 'application/json',}
				}).then(function (response) {

					console.log(response.data);
					scaleRadialGraph(response.data);
				})
				.catch(function (error) {
					console.log(error);
				});
		}
		// Post request for getting actors
		function postActorData(actor){

			let data = JSON.stringify({
				actor_id:actor
			});

			axios.post('http://127.0.0.1:5000/getActorNetwork', data,{
				headers: {
					'content-Type': 'application/json',}
				}).then(function (response) {
					forceDirectGraph(response.data);

				})
				.catch(function (error) {
					console.log(error);
				});
			axios.post('http://127.0.0.1:5000/getCloudPoints', data,{
				headers: {
					'content-Type': 'application/json',}

			}).then(function (response) {
				console.log("output");
				console.log(response.data);
				movieDensityMap(response.data);

			})
				.catch(function (error) {
					console.log(error);
				});
		}

	</script>





	<!-- Footer section -->
	<footer class="footer-section">
		<h2>HKUST Data Visualization Project by Vizitors</h2>
		<!-- <h2>2018. HTML template by <a href="https://colorlib.com" target="_blank">Colorlib</a></h2> -->
	</footer>
	<!-- Footer section end -->




	<!--====== Javascripts & Jquery ======-->
	<script src="src/js/jquery-2.1.4.min.js"></script>
	<script src="src/js/bootstrap.min.js"></script>
	<script src="src/js/magnific-popup.min.js"></script>
	<script src="src/js/owl.carousel.min.js"></script>
	<script src="src/js/circle-progress.min.js"></script>
	<script src="src/js/main.js"></script>
	<script src="src/js/jquery-csv.js"></script>
	<script src="src/js/jquery-csv.min.js"></script>
</body>
</html>
